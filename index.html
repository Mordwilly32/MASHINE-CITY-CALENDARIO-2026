<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendario Editable</title>
    <style>
        body { font-family: Arial, sans-serif; background:#e9eef3; margin:0; padding:0; }
        header { background:#1976d2; color:white; padding:15px; text-align:center; font-size:22px; }
        .container { padding:15px; }
        table { width:100%; border-collapse:collapse; background:white; border-radius:10px; overflow:hidden; }
        th { background:#1565c0; color:white; padding:8px; position:sticky; top:0; font-size:12px; }
        td { border:1px solid #ccc; padding:6px; font-size:12px; }

        /* colores */
        .INTRACEDE { background:#00c853; color:white; }
        .INTERCEDE { background:#fff200; }
        .NACIONALES { background:#ff1744; color:white; }
        .PREPARACION { background:#9ccc65; }
        .REUNIONES { background:#0277bd; color:white; }

        /* móvil */
        @media(max-width:700px){
            table { font-size:10px; }
            th, td { padding:4px; }
            header { font-size:18px; }
        }

        #passwordSection { margin-top:20px; text-align:center; }
        input, button { padding:8px; margin:5px; border-radius:6px; border:1px solid #aaa; }
        button { background:#1976d2; color:white; border:none; cursor:pointer; }

        /* menú de categorías */
        #categoryMenu {
            position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
            background:white; padding:15px; border-radius:10px;
            box-shadow:0 4px 12px rgba(0,0,0,0.2);
            display:none; z-index:999;
        }
        #categoryMenu button { display:block; width:100%; margin:6px 0; }
    </style>
</head>
<body>
<header>Calendario Editable</header>
<div class="container">
<table id="calendarTable">
<thead>
<tr>
<th>Día</th>
<th>Ene</th><th>Feb</th><th>Mar</th><th>Abr</th><th>May</th><th>Jun</th><th>Jul</th><th>Ago</th><th>Sep</th><th>Oct</th><th>Nov</th><th>Dic</th>
</tr>
</thead>
<tbody>
<script>
for(let d=1; d<=31; d++){
    document.write(`<tr><td>${d}</td>`);
    for(let m=1; m<=12; m++){
        document.write(`<td contenteditable="false" data-dia="${d}" data-mes="${m}">—</td>`);
    }
    document.write('</tr>');
}
</script>
</tbody>
</table>

<div id="passwordSection">
    <p>Contraseña para editar:</p>
    <input type="password" id="passwordInput" placeholder="Contraseña">
    <button onclick="checkPassword()">Entrar</button>
    <p id="passwordMessage" style="color:red;"></p>
</div>
</div>

<!-- menú categorías -->
<div id="categoryMenu">
    <button onclick="applyToCell('INTRACEDE')">Intracecede</button>
    <button onclick="applyToCell('INTERCEDE')">Intercede</button>
    <button onclick="applyToCell('NACIONALES')">Nacionales</button>
    <button onclick="applyToCell('PREPARACION')">Preparación</button>
    <button onclick="applyToCell('REUNIONES')">Reuniones</button>
    <button style="background:#ccc; color:black;" onclick="closeMenu()">Cancelar</button>
</div>

<script>
const PASSWORD = "1234";
let activeCell = null;

function checkPassword(){
    const inp = document.getElementById('passwordInput').value;
    const msg = document.getElementById('passwordMessage');
    if(inp === PASSWORD){ enableEditing(); msg.textContent = "Edición activada"; msg.style.color='green'; }
    else msg.textContent = "Contraseña incorrecta";
}

function enableEditing(){
    document.querySelectorAll('#calendarTable td[contenteditable]').forEach(td=>{
        td.contentEditable = true;
        td.onclick = ()=> openMenu(td);
    });
}

function openMenu(cell){
    activeCell = cell;
    document.getElementById('categoryMenu').style.display = 'block';
}
function closeMenu(){ document.getElementById('categoryMenu').style.display='none'; }

function applyToCell(category){
    if(!activeCell) return;
    activeCell.className = category;
    closeMenu();
}
</script>

</body>
</html>
